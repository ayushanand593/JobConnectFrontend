<!-- candidate-registration.component.html -->
<div class="registration-container">
  <div class="registration-card">
    <!-- Header -->
    <div class="registration-header">
      <h3>Join as a Candidate</h3>
      <p>Create your profile and start your job search journey</p>
    </div>

    <form [formGroup]="registrationForm" (ngSubmit)="onSubmit()" class="registration-form">

      <!-- Account Information Section -->
      <div class="form-section">
        <h4 class="section-title">Account Information</h4>

        <div class="form-row">
          <!-- Email -->
          <div class="form-group full-width">
            <label for="email" class="form-label required">Email Address</label>
            <input
              id="email"
              type="email"
              pInputText
              formControlName="email"
              placeholder="Enter your email"
              [class.ng-invalid]="isFieldInvalid('email')"
              class="form-input"
            />
            <small class="error-message" *ngIf="isFieldInvalid('email')">
              {{ getFieldError('email') }}
            </small>
          </div>
        </div>

        <div class="form-row">
          <!-- Password -->
          <div class="form-group">
            <label for="password" class="form-label required">Password</label>
            <p-password
              formControlName="password"
              inputId="password"
              placeholder="Enter your password"
              [class.ng-invalid]="isFieldInvalid('password')"
              styleClass="form-input"
              inputStyleClass="form-input"
              [feedback]="true"
              [toggleMask]="true"
            ></p-password>
            <small class="error-message" *ngIf="isFieldInvalid('password')">
              {{ getFieldError('password') }}
            </small>
          </div>
          <!-- Confirm Password -->
          <div class="form-group">
            <label for="confirmPassword" class="form-label required">Confirm Password</label>
            <p-password
              formControlName="confirmPassword"
              inputId="confirmPassword"
              placeholder="Confirm your password"
              [class.ng-invalid]="isFieldInvalid('confirmPassword')"
              styleClass="form-input"
              inputStyleClass="form-input"
              [feedback]="false"
              [toggleMask]="true"
            ></p-password>
            <small class="error-message" *ngIf="isFieldInvalid('confirmPassword')">
              {{ getFieldError('confirmPassword') }}
            </small>
          </div>
        </div>
      </div>

      <!-- Personal Information Section -->
      <div class="form-section">
        <h4 class="section-title">Personal Information</h4>

        <div class="form-row">
          <!-- First Name -->
          <div class="form-group">
            <label for="firstName" class="form-label required">First Name</label>
            <input
              id="firstName"
              type="text"
              pInputText
              formControlName="firstName"
              placeholder="Enter your first name"
              [class.ng-invalid]="isFieldInvalid('firstName')"
              class="form-input"
            />
            <small class="error-message" *ngIf="isFieldInvalid('firstName')">
              {{ getFieldError('firstName') }}
            </small>
          </div>
          <!-- Last Name -->
          <div class="form-group">
            <label for="lastName" class="form-label">Last Name</label>
            <input
              id="lastName"
              type="text"
              pInputText
              formControlName="lastName"
              placeholder="Enter your last name"
              [class.ng-invalid]="isFieldInvalid('lastName')"
              class="form-input"
            />
            <small class="error-message" *ngIf="isFieldInvalid('lastName')">
              {{ getFieldError('lastName') }}
            </small>
          </div>
        </div>

        <div class="form-row">
          <!-- Phone Number -->
          <div class="form-group">
            <label for="phone" class="form-label">Phone Number</label>
            <input
              id="phone"
              type="tel"
              pInputText
              formControlName="phone"
              placeholder="Enter your phone number"
              [class.ng-invalid]="isFieldInvalid('phone')"
              class="form-input"
            />
            <small class="error-message" *ngIf="isFieldInvalid('phone')">
              {{ getFieldError('phone') }}
            </small>
          </div>
          <!-- Years of Experience -->
          <div class="form-group">
            <label for="experienceYears" class="form-label">Years of Experience</label>
            <p-inputNumber
              formControlName="experienceYears"
              inputId="experienceYears"
              placeholder="0"
              [min]="0"
              [max]="50"
              [class.ng-invalid]="isFieldInvalid('experienceYears')"
              styleClass="form-input"
            ></p-inputNumber>
            <small class="error-message" *ngIf="isFieldInvalid('experienceYears')">
              {{ getFieldError('experienceYears') }}
            </small>
          </div>
        </div>
      </div>

      <!-- Professional Information Section -->
      <div class="form-section">
        <h4 class="section-title">Professional Information</h4>

        <div class="form-row">
          <!-- Headline -->
          <div class="form-group full-width">
            <label for="headline" class="form-label">Professional Headline</label>
            <input
              id="headline"
              type="text"
              pInputText
              formControlName="headline"
              placeholder="e.g., Full Stack Developer | React & Node.js Expert"
              [class.ng-invalid]="isFieldInvalid('headline')"
              class="form-input"
            />
            <small class="error-message" *ngIf="isFieldInvalid('headline')">
              {{ getFieldError('headline') }}
            </small>
            <small class="hint-text">Max 100 characters</small>
          </div>
        </div>

        <div class="form-row">
          <!-- Summary -->
          <div class="form-group full-width">
            <label for="summary" class="form-label">Professional Summary</label>
            <textarea
              id="summary"
              pInputTextarea
              formControlName="summary"
              placeholder="Brief description of your professional background and expertise"
              rows="4"
              [class.ng-invalid]="isFieldInvalid('summary')"
              class="form-textarea"
            ></textarea>
            <small class="error-message" *ngIf="isFieldInvalid('summary')">
              {{ getFieldError('summary') }}
            </small>
            <small class="hint-text">Max 500 characters</small>
          </div>
        </div>
      </div>

      <!-- Skills Section -->
<!-- <div class="form-section">
  <h4 class="section-title">Skills</h4>
  <div class="form-group">
  <p-autoComplete
      formControlName="skills"
      [suggestions]="filteredSkills"
      (completeMethod)="filterSkills($event)"
      (onSelect)="onSkillSelect($event)"
      (onUnselect)="removeSkill($event)"
      placeholder="Type to search and add skills"
      [multiple]="true"
      [showClear]="true"
      styleClass="form-autocomplete"
      inputStyleClass="form-input"
      [forceSelection]="false"
    ></p-autoComplete>
    <small class="hint-text">Press Enter after typing each skill.</small>
    <small class="error-message" *ngIf="isFieldInvalid('skills')">
      {{ getFieldError('skills') }}
    </small>
  </div>
</div> -->

 <div class="form-section">
    <h4 class="section-title">Skills</h4>
    <div class="skills-container">
      <div class="skills-list">
        <span 
          *ngFor="let skill of skillsArray; let i = index" 
          class="skill-tag"
          (click)="removeSkillByIndex(i)">
          {{skill}} <i class="pi pi-times"></i>
        </span>
      </div>
      <input 
        type="text" 
        pInputText 
        placeholder="Add skill and press Enter"
        (keydown.enter)="addSkillFromInput($event)"
        class="skill-input">
    </div>
  </div>

      <!-- Terms and Conditions Section -->
      <div class="form-section">
        <h4 class="section-title">Terms and Conditions</h4>

        <div class="form-group">
          <div class="checkbox-wrapper">
            <p-checkbox
              formControlName="termsAccepted"
              inputId="termsAccepted"
              [binary]="true"
              [class.ng-invalid]="isFieldInvalid('termsAccepted')"
            ></p-checkbox>
            <label for="termsAccepted" class="form-label checkbox-label">
              I agree to the
              <a href="/terms" target="_blank" class="link">Terms and Conditions</a>
              and
              <a href="/privacy" target="_blank" class="link">Privacy Policy</a>
              <span class="required">*</span>
            </label>
          </div>
          <small class="error-message" *ngIf="isFieldInvalid('termsAccepted')">
            {{ getFieldError('termsAccepted') }}
          </small>
        </div>
      </div>

      <!-- Submit Button -->
      <div class="form-actions">
      <button
  type="submit"
  class="btn btn-primary">
  {{ loading ? 'Creating Account...' : 'Create Account' }}
</button>
        <button
          type="button"
          class="btn btn-secondary"
          (click)="navigateToLogin()"
        >
          Already have an account? Sign In
        </button>
      </div>

    </form>
  </div>
</div>
